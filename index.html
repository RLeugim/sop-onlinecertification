<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exame de Certificação</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            padding-bottom: 2rem;
        }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
        
        .step-card {
            transition: all 0.5s ease-in-out;
            animation: fadeIn 0.5s ease-in-out;
            border-left: 4px solid transparent; 
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .step-id {
            font-size: 1.125rem; 
            font-weight: 800; 
            color: #1e40af; /* blue-800 */
            background-color: #bfdbfe; /* blue-200 */
            padding: 0.25rem 0.75rem;
            border-radius: 0.5rem;
            margin-right: 1rem;
            line-height: 1;
        }

        /* --- Estilos do Botão (CSS & SVG) --- */
        .step-content-wrapper {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1.5rem; 
        }
        .step-description-area {
            flex-grow: 1;
        }

        .advance-button {
            /* O botão é agora um elemento <button> estilizado como o quadrado verde */
            width: 5rem; 
            height: 5rem;
            background-color: #10b981; /* Cor verde vibrante para o botão */
            border-radius: 0.75rem;
            border: none;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06); 
            /* Para replicar o efeito de "brilho" da imagem original */
            outline: 2px solid rgba(16, 185, 129, 0.5); 
            outline-offset: 1px;
            margin-top: -1rem; /* Alinhar com o texto */
            flex-shrink: 0; /* Impedir que encolha */
        }

        .advance-button:hover:not(:disabled) {
            transform: translateY(-2px);
            background-color: #059669; /* Verde ligeiramente mais escuro no hover */
            box-shadow: 0 10px 15px -3px rgba(16, 185, 129, 0.4), 0 4px 6px -4px rgba(16, 185, 129, 0.2); 
            outline: 3px solid rgba(16, 185, 129, 0.7); 
        }

        .advance-button:active:not(:disabled) {
            transform: translateY(1px);
            box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.06); 
        }

        .advance-button:disabled {
            cursor: not-allowed;
            opacity: 0.6; /* Escurecer quando desativado */
            filter: grayscale(80%); 
            box-shadow: none;
            transform: none;
            outline: none;
        }
        
        .advance-button-icon {
            fill: white;
            width: 80%;
            height: 80%;
        }
        /* --- FIM Estilos do Botão --- */

        /* Estilo para o realce de texto */
        .highlight {
            font-weight: bold;
            color: #1d4ed8; /* blue-700 */
        }
        .highlight-italic {
            font-style: italic;
        }
        /* Novo estilo para negrito específico do subtítulo */
        .subtitle-bold {
            font-weight: 900;
        }


        .completed-card {
            border-left-color: #10b981; /* green-500 */
        }
        .active-card {
            box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.1), 0 4px 6px -4px rgba(59, 130, 246, 0.05); /* Blue shadow */
            outline: 2px solid #3b82f6; /* ring-2 ring-blue-500 */
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800 min-h-screen p-4 md:p-8">

    <div class="container mx-auto max-w-4xl">
        
        <header class="text-center mb-8 md:mb-12">
            <h1 class="text-3xl md:text-4xl font-bold text-blue-800 mb-2">📚 POP - Exame de Certificação Online</h1>
            <p class="text-lg text-stone-600">Guia sequencial interativo : confirmação de leitura com o <span class="subtitle-bold">botão verde</span></p>
        </header>

        <main id="content-container">
            <div id="sop-steps" class="space-y-6">
                <!-- Passos renderizados pelo JavaScript --></div>
        </main>
    </div>

    <script>
        const sopSteps = [
            { id: "1.1", category: "Preparação", title: "Nome para o Certificado 🖋️", icon: "🖋️", description: "Fornecer ao formador o nome que pretende no Certificado: *2 a 3 nomes (por extenso, exato e apenas com letras)*." },
            { id: "1.2", category: "Preparação", title: "*Email* de Acesso 📧", icon: "📧", description: "Fornecer o endereço de *email* que será usado para o seu registo e acesso à plataforma. Este será o seu *username*." },
            { id: "1.3", category: "Preparação", title: "Lembrete do Formador 🗓️", icon: "🗓️", description: "O formador solicitará o acesso à plataforma *até 2 dias antes do exame*: *informe-o como correu*." },
            { id: "2.1", category: "Teste de Acesso", title: "Sessão de Teste 🧑‍💻", icon: "🧑‍💻", description: "Testar os acessos com o formador durante a *sessão de formação imediatamente anterior ao dia do exame*." },
            { id: "2.2", category: "Teste de Acesso", title: "Credenciais 🔑", icon: "🔑", description: "O *username* é o *email* que forneceu. A *password* deverá ter sido recebida, ou será fornecida pelo formador." },
            { id: "2.3.1", category: "Teste de Acesso", title: "Acesso à Plataforma 🌐", icon: "🌐", description: "Entrar em: <code class='bg-stone-200 text-stone-800 px-2 py-1 rounded'>www.ilssi.org</code>" },
            { id: "2.3.2", category: "Teste de Acesso", title: "Acesso: *Login*", icon: "🌐", description: "Clicar em *Login*." },
            { id: "2.3.3", category: "Teste de Acesso", title: "Acesso: Credenciais", icon: "🌐", description: "Inserir *Username* e *Password*." },
            { id: "2.3.4", category: "Teste de Acesso", title: "Acesso: *Portals*", icon: "🌐", description: "Clicar em *Portals*." },
            { id: "2.3.5", category: "Teste de Acesso", title: "Acesso: *Exam Dashboard*", icon: "🌐", description: "Selecionar *Exam Dashboard*." },
            { id: "2.4", category: "Teste de Acesso", title: "Verificação ✅", icon: "✅", description: "Verificar que o *exame correto* aparece listado no *Exam Dashboard*." },
            { id: "3.1", category: "Dia do Exame", title: "Equipamento e Documento 🆔", icon: "🆔", description: "Ter consigo o *telemóvel* garantindo que a *aplicação* (ou navegador da internet) *tem acesso à câmara*, e um documento de identificação *físico com fotografia* (Cartão de Cidadão, Passaporte, etc.)." },
            { id: "3.2", category: "Dia do Exame", title: "Acesso Antecipado ⏰", icon: "⏰", description: "Aceder à plataforma *10 minutos antes* da hora marcada para o exame." },
            
            { id: "3.3.1", category: "Dia do Exame", title: "Validação de Identidade (Passo 1) 🛡️", icon: "📸", 
                description: "Após a verificação dos passos 2.3.1 a 2.3.5 e do 2.4, *clicar para iniciar o exame* no *Exam Dashboard* (inicia o processo de identificação)." 
            },
            
            { id: "3.3.2", category: "Dia do Exame", title: "Validação de Identidade (Passo 2) 🛡️", icon: "📸", description: "Seguir as instruções para *efetuar a validação de identidade (verificação do documento de identificação 🆔)* conforme a plataforma." },
            { id: "3.3.3", category: "Dia do Exame", title: "Validação de Identidade (Passo 3) 🛡️", icon: "📸", description: "*Aguarde a validação da sua identidade*." },
            { id: "3.4", category: "Dia do Exame", title: "Início ▶️", icon: "▶️", description: "Terminada a identificação, pode *iniciar o exame*." },
            { id: "3.5", category: "Dia do Exame", title: "Regra de Permanência ⚠️ (ATENÇÃO)", icon: "⚠️", description: "Uma vez iniciado, *não pode voltar atrás (entenda-se: sair da plataforma)*. Se o fizer, a plataforma processa como executado e o exame deixa de estar disponível.", isWarning: true },
            
            { id: "3.6", category: "Dia do Exame", title: "Conduta 🤫", icon: "🤫", 
                description: "O som deve estar em *silêncio*, a *câmara ligada*. Qualquer questão *deverá ser enviada via* *chat* e apenas para o formador/*proctor* do exame (alternativamente ao *chat* poderão ser criadas salas de dúvidas: salas simultâneas ou *breakout rooms*)." 
            },

            { id: "4.1", category: "Dicas", title: "Cálculos 🧮", icon: "🧮", description: "Os cálculos são simples. Uma *calculadora básica* e uma *folha de papel* são suficientes." },
            { id: "4.2", category: "Dicas", title: "Gestão do Ritmo 🏃", icon: "🏃", description: "Se tiver dúvidas, *registe o número da(s) pergunta(s)* e prossiga para manter o ritmo." },
            { id: "4.3", category: "Dicas", title: "Revisão 🔄", icon: "🔄", description: "No final, *volte atrás* para rever as perguntas que registou. O voltar atrás é rápido e não interrompe o seu ritmo inicial." }
        ];

        let currentStepIndex = -1; 
        let currentCategory = "";
        const sopStepsContainer = document.getElementById('sop-steps');

        function highlightText(text) {
            const englishTerms = [
                'email', 'username', 'password', 'login', 'portals', 
                'exam dashboard', 'chat', 'proctor', 'breakout rooms',
                'aplicação' 
            ].map(term => term.toLowerCase());
            
            let formattedText = text.replace(/\*(.*?)\*/g, function(match, content) {
                let innerHTML = content.trim();
                
                let isEnglishTerm = false;
                
                if (englishTerms.includes(innerHTML.toLowerCase())) {
                    isEnglishTerm = true;
                } else {
                    const words = innerHTML.toLowerCase().split(/\s+/);
                    for (const word of words) {
                        if (englishTerms.includes(word.replace(/[^a-z0-9]/g, ''))) {
                            isEnglishTerm = true;
                            break;
                        }
                    }
                }

                if (isEnglishTerm) {
                    // Aplica itálico E negrito para termos em inglês
                    return `<span class="highlight highlight-italic">${innerHTML}</span>`;
                } else {
                    // Aplica SÓ negrito para termos em português
                    return `<span class="highlight">${innerHTML}</span>`;
                }
            });

            return formattedText;
        }

        function getAdvanceButtonSVG() {
            // SVG da seta simples e mais espessa, SEM o ícone do rato.
            return `
                <svg class="advance-button-icon" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <!-- Seta Branca (Mais espessa) -->
                    <path d="M 50 85 L 30 60 L 45 60 L 45 15 L 55 15 L 55 60 L 70 60 Z" fill="white" />
                </svg>
            `;
        }


        function renderStepContent(step) {
            if (step.category !== currentCategory) {
                currentCategory = step.category;
                const header = document.createElement('div');
                header.className = 'header-transition mt-8 mb-4';
                header.innerHTML = `
                    <h2 class="text-2xl font-bold text-stone-700 pt-4">${step.id.split('.')[0]}. ${step.category}</h2>
                    <p class="text-base text-stone-600 mb-6">
                        ${currentCategory === 'Preparação' ? 'Esta secção detalha os passos iniciais e a informação que precisa de fornecer ao seu formador.' : ''}
                        ${currentCategory === 'Teste de Acesso' ? 'O teste de acesso deve ser efetuado na sessão anterior ao exame para evitar problemas no dia.' : ''}
                        ${currentCategory === 'Dia do Exame' ? 'Estes são os procedimentos exatos a seguir no dia do exame. Leia com atenção, especialmente as regras de permanência e conduta.' : ''}
                        ${currentCategory === 'Dicas' ? 'Estratégias recomendadas para gerir o seu tempo e abordar as perguntas de forma eficiente durante o exame.' : ''}
                    </p>
                `;
                sopStepsContainer.appendChild(header);
            }

            const card = document.createElement('div');
            card.id = `step-${step.id}`;
            card.className = `step-card p-6 rounded-lg shadow-lg mb-4 ${step.isWarning ? 'bg-red-50 border border-red-500' : 'bg-white border border-stone-200'} active-card`;
            
            const descriptionHtml = highlightText(step.description);
            const titleHtml = highlightText(step.title);
            
            card.innerHTML = `
                <h3 class="flex items-start text-xl font-semibold ${step.isWarning ? 'text-red-800' : 'text-blue-800'} mb-3">
                    <span class="step-id">${step.id}</span>
                    <span class="pt-1">${step.icon} ${titleHtml}</span>
                </h3>
                
                <div class="step-content-wrapper">
                    <div class="step-description-area md:pl-10">
                        <p class="${step.isWarning ? 'text-red-700 font-medium' : 'text-stone-700'}">
                            ${descriptionHtml}
                        </p>
                    </div>
                    
                    <button id="advance-button-${step.id}" 
                            class="advance-button"
                            title="Confirmar Leitura e Avançar para o Próximo Passo">
                        ${getAdvanceButtonSVG()}
                    </button>
                </div>
                
            `;
            sopStepsContainer.appendChild(card);
            
            card.scrollIntoView({ behavior: 'smooth', block: 'end' });
            
            setupStepInteractions(step.id);
        }

        function setupStepInteractions(stepId) {
            const advanceButton = document.getElementById(`advance-button-${stepId}`);
            const currentCard = document.getElementById(`step-${stepId}`);
            
            const isLastStep = sopSteps.findIndex(s => s.id === stepId) === sopSteps.length - 1;

            if (!isLastStep) {
                currentCard.classList.add('active-card');
            } else {
                advanceButton.disabled = true;
                currentCard.classList.remove('active-card');
                currentCard.classList.add('completed-card');
            }
            
            if (!isLastStep) {
                // Attach handler to the button element itself
                advanceButton.addEventListener('click', handleAdvance);
            }
        }

        function handleAdvance() {
            const previousStepIndex = currentStepIndex;
            currentStepIndex++; 

            if (previousStepIndex >= 0) {
                const previousStepId = sopSteps[previousStepIndex].id;
                const previousCard = document.getElementById(`step-${previousStepId}`);
                
                const previousButton = document.getElementById(`advance-button-${previousStepId}`);
                if (previousButton) {
                    previousButton.disabled = true;
                    previousButton.removeEventListener('click', handleAdvance);
                    previousButton.classList.add('pointer-events-none'); 
                }
                
                if (previousCard) {
                    previousCard.classList.remove('active-card');
                    previousCard.classList.add('completed-card'); 
                }
            }
            
            if (currentStepIndex < sopSteps.length) {
                const nextStep = sopSteps[currentStepIndex];
                renderStepContent(nextStep);
            } else {
                const finalMessage = document.createElement('div');
                finalMessage.className = 'text-center text-2xl font-bold text-green-700 p-6 mt-12 bg-green-100 rounded-xl shadow-lg';
                finalMessage.innerHTML = '✅ POP - Fluxo de Leitura Concluído! O guia completo está disponível acima.';
                sopStepsContainer.appendChild(finalMessage);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            handleAdvance(); 
        });

    </script>

</body>
</html>

